# Preparing and building the BeardedSpice distributive.
All procedures described below use scripts and resources from the folder "Scripts". All scripts use environment variables that is generated by Xcode. I.e. scripts run correctly only from Xcode environment. Also scripts use user-defined environment vars, which may see in "Build Settings" of the BeardedSpice project. In Project navigator (left side of main window, usually) select BeardedSpice project, then in the Editor window (central view) select PROJECT-\>BeardedSpice, then select Build Settings tab on top. This variables have names with prefix "BS_".


## Requirements.
You need to have a developer certificate from Apple, that would be correct to sign the application. Select that certificate in the settings of BeardedSpice target. In Project navigator select BeardedSpice project, then in the Editor window (central view) select TARGET-\>BeardedSpice, then select Build Settings tab on top, then select value for "Code Signing Identity".

Also for signature updates, you will need a private key, which should be placed in a hidden place, such as ~/Library/Keychains/beardedspice-distr-private-key.pem. You should ensure that access rights to that file 0400 (readonly for owner). 

Check the setting evar BS_UPDATER_PRIVATE_KEY_FILE, it should point to the private key file.

## Preparing sources.
- Merge from the master branch;
- Resolve conflicts and delete unnecessary files;
- Check version number and build number in project;

## Building BeardedSpice application for publish.
From Xcode main menu:
- select Product-\>Scheme-\>BeardedSpice
- select Product-\>Archive
This procedure creates the archive (release configuration), which will be used for creating release version of ZIP file.

## Preparing for publishing.
Note: This step uses last archive of the BeardedSpice application.

1. in Project navigator (left side of main window, usually) select and edit file Release-Notes-EN.txt, which is located in the "Scripts" group;
2. in Xcode main menu select Product-\>Scheme-\>Create Release, then select Product-\>Build;
3. inspect folder "publish", which is located in the source root directory. Check ZIP file and release notes files.

# Publish the BeardedSpice distributive.
For publish you should "commit" changes and "push" it to remote repository!
